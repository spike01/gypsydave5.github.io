<!DOCTYPE html>

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      home &middot; gypsydave5
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          gypsydave5
        </a>
      </h1>
      <p class="lead">The blog of David Wickes, software developer</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item active" href="/">Home</a>

      

      
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About me</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/gypsydave5">GitHub</a>
      <a class="sidebar-nav-item" href="https://twitter.com/gypsydave5">Twitter</a>
      <a class="sidebar-nav-item" href="mailto:dave@gypsydave5.com">Email</a>

    </nav>

    <p>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/21/lazy-eval-and-memo/">
        (Basic) Lazy Evaluation and Memoization in JavaScript
      </a>
    </h1>

    <span class="post-date">21 Mar 2015</span>

    <p>Calculation takes time and effort. If I needed to know what <code>4719340 + 397394</code>
was (and I didn&#39;t have a calculator), it would take a few minutes to work out.
Right now as I don&#39;t need to know.  Maybe I&#39;ll never need to know. I could put
those two numbers and the <code>+</code> sign on a piece of paper and stick it in my
pocket. If I ever wanted to know the answer, I could get the paper out and do
the maths. I should write &#39;Answer to silly blog sum&#39; on the top of the paper so
I know what the sum is about. And why I&#39;m carrying a piece of paper around.</p>

<p>That&#39;s lazy evaluation - holding on to an expression and only evaluating it when
you need it. It pairs neatly with <strong>memoization</strong> - keeping the results of
evaluated expressions in memory so that you don&#39;t have to evaluate them every
time you need their result.</p>

<p>(Which figures as, if I ever do work out what <code>4719340 + 397394</code> is, I never
want to work it out again. Ever.)</p>

<p>Let&#39;s take a look at doing some lazy evaluation in JavaScript - in other
languages, such as Clojure, we get <a href="http://clojure.org/sequences">a lot of this baked in</a>, but in JavaScript
there&#39;s some work to do. Let&#39;s take a simple function:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">add</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>And we&#39;d like to make that function lazy - with another function, naturally.
Something like:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">addThisLater</span> <span class="o">=</span> <span class="nx">lazyEval</span><span class="p">(</span> <span class="nx">add</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span> <span class="p">);</span>

<span class="nx">addThisLater</span><span class="p">()</span> <span class="c1">//=&gt; 9</span>
</code></pre></div>
<p><code>lazyEval()</code> takes a function name, some more arguments, and returns a function
that, when it evaluates, returns the result of evaluating the passed in function
with the other arguments.</p>

<p>So far so good - but what needs to be returned from <code>lazyEval()</code> to make it work as
described above? As it turns out, not that much:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">lazyEval</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>And this is where things get exciting. We&#39;ve <a href="/2015/02/19/not-quite-js-currying/">seen <code>bind()</code> before</a>, so
let&#39;s take a look at <code>apply()</code>, what happens when we chain it with <code>bind()</code>, and
what&#39;s happening with <code>arguments</code> keyword.</p>

<h3><code>apply()</code></h3>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply()</code></a> is pretty simple - it&#39;s a method that all functions have. It takes
two arguments. When its evaluated it returns the result of evaluating the
function within the scope of the first argument (just like <code>bind()</code>). The second
argument is an array (or an array-like object - that&#39;s important) of arguments
for the function to be evaluated with. Which all sounds scary, but if I do this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">add</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">])</span> <span class="c1">//=&gt; 3</span>
</code></pre></div>
<p>I hope that begins to makes more sense. Now let&#39;s take a closer look at <code>arguments</code>.</p>

<h3><code>arguments</code> and Argument Binding</h3>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments"><code>arguments</code></a> is an array-like object (it lacks a number of methods that arrays
have) which contains, unsurprisingly, all of the arguments passed to the current
function you&#39;re in the scope of - even ones not bound to a variable.</p>

<p>JavaScript functions, unlike some other languages, can take as many parameters
as you like. Which means that this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">//=&gt; 3</span>
</code></pre></div>
<p>works just like this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;peace&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">],</span> <span class="p">{</span> <span class="nx">and</span><span class="o">:</span> <span class="s1">&#39;understanding&#39;</span> <span class="p">})</span> <span class="c1">//=&gt; 3</span>
</code></pre></div>
<p><code>add()</code> binds its first two arguments to <code>a</code> and <code>b</code>. Those extra arguments get
ignored - <code>add()</code> just goes on adding as usual. But that does not mean that
those arguments go nowhere. They&#39;re still available to the function in the
<code>arguments</code> <del>array</del> array-like object.</p>

<p>Look, try this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">echo</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">arguments</span>
<span class="p">}</span>

<span class="nx">echo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//=&gt; { 0: 1 }</span>

<span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;peace&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;love&#39;</span><span class="p">],</span> <span class="p">{</span> <span class="nx">and</span><span class="o">:</span> <span class="s1">&#39;understanding&#39;</span> <span class="p">})</span>
<span class="c1">//=&gt; { &#39;0&#39;: &#39;peace&#39;,&#39;1&#39;: [ &#39;love&#39; ], &#39;2&#39;: { and: &#39;understanding&#39; } }</span>

<span class="nx">echo</span><span class="p">(</span><span class="s1">&#39;faith&#39;</span><span class="p">,</span> <span class="s1">&#39;hope&#39;</span><span class="p">,</span> <span class="s1">&#39;charity&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span> <span class="c1">//=&gt; &#39;charity&#39;</span>
</code></pre></div>
<p>OK, back on track. When <code>apply(fn, arguments)</code> is evaluated, it is passing the
arguments <code>fn, 4, 5</code> along to the function that <code>apply()</code> is being called
on. Namely, in this case, <code>bind()</code>.</p>

<p>(As a comparison, if <code>apply()</code> was replaced by its close cousin, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call"><code>call()</code></a>,
which takes more traditional looking arguments, it would look like this:
<code>bind.call(fn, fn, 4, 5)</code>)</p>

<p><code>fn, 4, 5</code> gets passed along to <code>bind()</code>, where <code>fn</code> becomes the <code>this</code> argument
for <code>bind()</code>, providing the scope, and the <code>4, 5</code> get bound as the arguments of
the function that <code>bind()</code> is being called on (in our examples, <code>add()</code>). And so
we get the <code>add()</code> function back, but with all its arguments already bound,
ready to be evaluated with a flick of our <code>()</code>.</p>

<h3>Memoization</h3>

<p>All of which is great, but what&#39;s the point if you have to evaluate the function
every time it&#39;s called? Wouldn&#39;t it be better if the function &#39;remembered&#39; the
result, and returned the remembered result the second time it was called rather
than evaluating it all over again? Or, to continue the increasingly strained
example, I should write the answer down on my piece of paper once I&#39;ve worked it
out the first time, rather than having to do the sum every time I need to know
the answer.</p>

<p>And that&#39;s <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a>, a way of optimizing code so that it will return cached
results for the same inputs. This might get a little more complicated with
functions that have more than one input, but for our little <code>lazyEval</code> function
it&#39;s not all that hard (there&#39;s no arguments at all!):</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">lazyEvalMemo</span> <span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">lazyEval</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">bind</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
  <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I remember this one!&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">result</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Let me work this out for the first time...&quot;</span><span class="p">);</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="nx">lazyEval</span><span class="p">()</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Let&#39;s give it a function - a <code>sum</code> that does a little reporting for us...</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">sum</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I&#39;m calculating!&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>And let it rip!</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">lazyMemoSum</span> <span class="o">=</span> <span class="nx">lazyEvalMemo</span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span> <span class="mi">4719340</span><span class="p">,</span> <span class="mi">397394</span><span class="p">)</span>

<span class="nx">lazyMemoSum</span><span class="p">()</span>
<span class="c1">//=&gt; Let me work this out for the first time...</span>
<span class="c1">//=&gt; I&#39;m calculating!</span>
<span class="c1">//=&gt; 5116734</span>

<span class="nx">lazyMemoSum</span><span class="p">()</span>
<span class="c1">//=&gt; I remember this one!</span>
<span class="c1">//=&gt; 5116734</span>
</code></pre></div>
<p>It does the calculation the first time, and every subsequent call uses the
memoized result.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/03/21/brew-cask/">
        Brew Cask
      </a>
    </h1>

    <span class="post-date">21 Mar 2015</span>

    <p><a href="http://brew.sh/">Homebrew</a> is wonderful, and if you&#39;re using a Mac to develop on and aren&#39;t
using it to manage your command line applications then I&#39;d be surprised.
Actually, I&#39;d assume you were using [MacPorts].</p>

<p>I&#39;ve recently started to take advantage of an additonal library of prebuilt
binaries for Homebrew called <a href="https://github.com/caskroom/homebrew-cask">Cask</a>. This gives access to many (if not all) of
the larger, often graphical, applications that you need, such as Chrome,
IntelliJ, Vagrant... it&#39;s a long list.</p>

<p>It even integrates well with my favourite Mac productivity tool, <a href="http://www.alfredapp.com/">Alfred</a>. And,
yes, you can install that with Cask too.</p>

<p>Set up with:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">brew install caskroom/cask/brew-cask
</code></pre></div>
<p>and then install software with:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">brew cask install alfred
</code></pre></div>
  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/02/19/not-quite-js-currying/">
        (not quite) Currying in JavaScript
      </a>
    </h1>

    <span class="post-date">19 Feb 2015</span>

    <p>Currying, yet another <em>I&#39;ve heard the cool kids saying that</em> word. Acually,
having done some reading, it turns out the cool kids may be misusing it, but
we&#39;ll get to that part later. Let&#39;s just spend a minute looking at the wonder of
<code>.bind()</code>.</p>

<p>Here&#39;s a function:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">addition</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
<span class="p">}</span>

<span class="nx">addition</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">//=&gt; 3</span>
</code></pre></div>
<p>Let&#39;s say we always wanted to be adding twenty-two - we could make ourselves
a shiny new function, or we could build on the way <code>addition</code> works using
<code>.bind()</code></p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">addTwentyTwo</span> <span class="o">=</span> <span class="nx">addition</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>
<span class="nx">addTwentyTwo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//=&gt; 23</span>
</code></pre></div>
<p><code>bind()</code>, as you&#39;ll see in the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">MDN docs</a>, is a method you can call on a function in
JavaScript. It creates a new function based on the old one, with the <code>this</code>
keyword of the new function set to the first argument to <code>bind()</code>, and other
arguments given being set to the arguments of the original function. Confusing,
right? Well, it&#39;s probably best to ignore the first arpument, the <code>this</code>
reassignment for now, unless there&#39;s a pressing need to change it, and focus on
the rest. Here, let&#39;s do it again:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">twentyFive</span> <span class="o">=</span> <span class="nx">addTwentyTwo</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nx">twentyFive</span><span class="p">()</span> <span class="c1">//=&gt; 25</span>
</code></pre></div>
<p>When we use <code>.bind()</code> we can change the <em>arity</em> (number of ardguments) of the
function returned, setting the values of any of all of the arguments in the
original function:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">twoHundred</span> <span class="o">=</span> <span class="nx">addition</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">)</span>
<span class="nx">twoHundred</span><span class="p">()</span> <span class="c1">//=&gt; 200</span>
</code></pre></div>
<p>What bind allows us to do is <em>partial application</em>, fixing values of a function
and returning one of smaller arity:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">addTheseFourUp</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">d</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">addTwoAndTheseThreeUp</span> <span class="o">=</span> <span class="nx">addTheseFourUp</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nx">addTwoAndTheseThreeUp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">//=&gt; 8</span>
</code></pre></div>
<p>This is technically not <em>currying</em>, which <a href="https://en.wikipedia.org/wiki/Currying#Contrast_with_partial_function_application">should only return functions with an
arity of 1</a>. Currying <code>addTheseFourUp</code> would look something like this:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">curriedFour</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">+</span> <span class="nx">d</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">curriedFour</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">2</span><span class="p">)(</span><span class="mi">3</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span> <span class="c1">//=&gt; 10</span>
</code></pre></div>
<p>Which we could also play around with like this...</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">applyFourTimes</span><span class="p">(</span><span class="nx">fun</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fun</span><span class="p">(</span><span class="nx">fun</span><span class="p">(</span><span class="nx">fun</span><span class="p">(</span><span class="nx">fun</span><span class="p">(</span><span class="nx">num</span><span class="p">))))</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="kr">double</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span> <span class="o">+</span> <span class="nx">num</span>
<span class="p">}</span>

<span class="nx">applyFourTimes</span><span class="p">(</span><span class="kr">double</span><span class="p">)(</span><span class="mi">3</span><span class="p">)</span> <span class="c1">//=&gt; 48</span>
</code></pre></div>
<h3>Postscript</h3>

<p>Not only is partial function application not currying - but currying should
probably be called <em>Schönfinkelization</em> after its true originator, <a href="https://en.wikipedia.org/wiki/Moses_Sch%C3%B6nfinkel">Moses
Schönfinkel</a>, to whom <a href="https://en.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</a> attributed the concept. That said, W. V.
O. Quine points out that the idea had already been hit upon by <a href="https://en.wikipedia.org/wiki/Moses_Sch%C3%B6nfinkel#Work">Frege</a>.</p>

<p>From JavaScript to philosophy in but a few skips...</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/02/14/javascript-arrays/">
        Arrays in JavaScript
      </a>
    </h1>

    <span class="post-date">14 Feb 2015</span>

    <p>Arrays are easy, right? Pretty basic go-to data structure. Pretty primative. So
if we did something like this - we wouldn&#39;t be messing with the array would we?</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;tom&quot;</span><span class="p">,</span> <span class="s2">&quot;alan&quot;</span><span class="p">,</span> <span class="s2">&quot;harry&quot;</span><span class="p">]</span>
<span class="nx">array</span><span class="p">.</span><span class="nx">suprise</span><span class="o">=</span> <span class="s2">&quot;dave&quot;</span>
</code></pre></div>
<p>surely not?</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">for</span> <span class="p">(</span><span class="nx">index</span> <span class="k">in</span> <span class="nx">array</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">index</span> <span class="p">)</span> <span class="p">}</span>

<span class="c1">//=&gt; 0</span>
<span class="c1">//=&gt; 1</span>
<span class="c1">//=&gt; 2</span>
<span class="c1">//=&gt; surprise</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
<span class="c1">//=&gt; [&quot;tom&quot;, &quot;alan&quot;, &quot;harry&quot;, suprise: &quot;dave&quot;]</span>
</code></pre></div>
<p>Which might just be a good reason not to use <code>for... in</code>, or trusting it to put
things as strings in a sensible way, but is a good demonstration of...</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">typeof</span> <span class="nx">bob</span>
<span class="c1">//=&gt; &quot;object&quot;</span>
</code></pre></div>
<p>Because everything is an object in JS, the interface for arrays is kinda hacked
together out of object properties. Arrays are built on top of
objects, they are not a simpler data-type, and objects in JS are just <strong>collections of strings that point at things</strong>.</p>

<p>(and there aren&#39;t just arrays to consider - when there&#39;s the world of
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Predefined_Core_Objects#Working_with_Array-like_objects">Array-like objects</a> to look at. But more on that another time.)</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/02/01/hoisting-js/">
        Hoisting in JavaScript
      </a>
    </h1>

    <span class="post-date">01 Feb 2015</span>

    <p>Working at <a href="http://www.mergermarket.com/info/">Mergermarket</a> is fun. Not only am I getting to grips with a new
language, <a href="http://groovy.codehaus.org/">Groovy</a>, in a nice, agile environment, on a project that&#39;s
challenging but to which I can make some small and increasing contributions to. Not
only that, but I&#39;m also working with some damn clever and patient people who
are happy to explain things to me as we go along.</p>

<p>So my next thsee posts will be about some of what I&#39;ve learned about JavaScript
in the last month with Mat, Mike, Danielle, Nick and many others.</p>

<h3>Hoisting</h3>

<p>At the top of my list of &quot;words I&#39;d heard associated with JS but didn&#39;t have
the foggiest&quot;, <em>hoisting</em> or, more transparently, variable hoisting. Behold the
following:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">printThis</span><span class="p">(</span><span class="nx">showLog</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">showLog</span> <span class="o">===</span> <span class="kc">true</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">logMessage</span> <span class="o">=</span> <span class="s1">&#39;MESSAGE!&#39;</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logMessage</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logMessage</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Which you may be inclined to think would return two outputs to the console when
called with <code>printThis(true)</code>, one of <code>MESSAGE!</code> and then the ubiquitous JS
<code>undefined</code>. Because <code>logMessage</code> isn&#39;t defined at the second <code>console.log()</code>.</p>

<p>Does it?</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">MESSAGE!
MESSAGE!
</code></pre></div>
<p>Because the interpreter looks at the code and does this to it:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="nx">showLog</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">logMessage</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">showLog</span> <span class="o">===</span> <span class="kc">true</span><span class="p">){</span>
        <span class="nx">logMessage</span> <span class="o">=</span> <span class="s1">&#39;MESSAGE!&#39;</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logMessage</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">logMessage</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The variable is &#39;hoisted&#39; out of its declaration in the block and created at the
top of the function. The assignment still takes place in the same place, but
because the scope of <code>logMessage</code> is the entire function, the variable is still
available at the last <code>console.log</code>. This is because (motto alert) <strong>JS
has function-level scope, not block-level scope</strong>. The interpreter just ignores
those little <code>{</code> and <code>}</code> unless they&#39;re backed up with a function declaration.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page2">Older</a>
  
  
    <span class="pagination-item newer">Newer</span>
  
</div>
    </div>

  </body>
</html>
